!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("tinybar")):"function"==typeof define&&define.amd?define(["exports","tinybar"],e):e(t.Inertia={},t.Tinybar)}(this,function(t,e){e=e&&e.hasOwnProperty("default")?e.default:e;var i={modal:null,listener:null,show:function(t){var e=this,i=document.createElement("html");i.innerHTML=t,i.querySelectorAll("a").forEach(function(t){return t.setAttribute("target","_top")}),this.modal=document.createElement("div"),this.modal.style.position="fixed",this.modal.style.width="100vw",this.modal.style.height="100vh",this.modal.style.padding="50px",this.modal.style.backgroundColor="rgba(0, 0, 0, .6)",this.modal.style.zIndex=2e5,this.modal.addEventListener("click",function(){return e.hide()});var n=document.createElement("iframe");n.style.backgroundColor="white",n.style.borderRadius="5px",n.style.width="100%",n.style.height="100%",this.modal.appendChild(n),document.body.prepend(this.modal),document.body.style.overflow="hidden",n.contentWindow.document.open(),n.contentWindow.document.write(i.outerHTML),n.contentWindow.document.close(),this.listener=this.hideOnEscape.bind(this),document.addEventListener("keydown",this.listener)},hide:function(){this.modal.outerHTML="",this.modal=null,document.body.style.overflow="visible",document.removeEventListener("keydown",this.listener)},hideOnEscape:function(t){27===t.keyCode&&this.hide()}},n=new e,o={delay:null,loading:!1,start:function(){var t=this;clearTimeout(this.delay),this.delay=setTimeout(function(){t.loading=!0,n.go(10)},250)},increment:function(){this.loading&&n.go(50)},stop:function(){clearTimeout(this.delay),this.loading&&(n.go(100),this.loading=!1)}};t.Inertia={resolveComponent:null,updatePage:null,version:null,visitId:null,abortController:null,init:function(t){var e=t.initialPage,i=t.updatePage;this.resolveComponent=t.resolveComponent,this.updatePage=i,window.history.state&&"back_forward"===this.navigationType()?this.setPage(window.history.state):window.sessionStorage.getItem("inertia.hardVisit")?(window.sessionStorage.removeItem("inertia.hardVisit"),this.setPage(e,{preserveState:!0})):(e.url+=window.location.hash,this.setPage(e)),window.addEventListener("popstate",this.restoreState.bind(this))},navigationType:function(){if(window.performance&&window.performance.getEntriesByType("navigation").length)return window.performance.getEntriesByType("navigation")[0].type},isInertiaResponse:function(t){return t&&t.headers.has("x-inertia")},hasBody:function(t){return-1===["GET","HEAD"].indexOf(t.toUpperCase())},getCookieValue:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},cancelActiveVisits:function(){this.abortController&&this.abortController.abort(),this.abortController=new AbortController},createVisitId:function(){return this.visitId={},this.visitId},visit:function(t,e){var n=this;void 0===e&&(e={});var r=e.method;void 0===r&&(r="get");var s=e.data;void 0===s&&(s={});var a=e.replace;void 0===a&&(a=!1);var d=e.preserveScroll;void 0===d&&(d=!1);var l=e.preserveState;void 0===l&&(l=!1);var c=e.only;void 0===c&&(c=[]),o.start(),this.cancelActiveVisits();var h=this.createVisitId();return window.fetch(t.toString(),Object.assign({},{method:r.toLowerCase()},this.hasBody(r)?{body:JSON.stringify(s)}:{},{signal:this.abortController.signal,credentials:"include",headers:Object.assign({},{"Content-Type":"application/json;charset=UTF-8",Accept:"text/html, application/xhtml+xml","X-Requested-With":"XMLHttpRequest","X-Xsrf-Token":this.getCookieValue("XSRF-TOKEN"),"X-Inertia":!0},c.length?{"X-Inertia-Partial-Component":this.page.component,"X-Inertia-Partial-Data":c.join(",")}:{},this.version?{"X-Inertia-Version":this.version}:{})})).then(function(t){return 409===t.status&&t.headers.has("x-inertia-location")?(o.stop(),n.hardVisit(!0,t.headers.get("x-inertia-location"))):n.isInertiaResponse(t)?t.json():void t.text().then(function(t){o.stop(),i.show(t)})}).catch(function(t){return"AbortError"===t.name?void 0:Promise.reject(t)}).then(function(t){if(t)return c.length&&(t.props=Object.assign({},n.page.props,t.props)),n.setPage(t,{visitId:h,replace:a,preserveScroll:d,preserveState:l})})},hardVisit:function(t,e){window.sessionStorage.setItem("inertia.hardVisit",!0),t?window.location.replace(e):window.location.href=e},setPage:function(t,e){var i=this;void 0===e&&(e={});var n=e.visitId;void 0===n&&(n=this.createVisitId());var r=e.replace;void 0===r&&(r=!1);var s=e.preserveScroll;void 0===s&&(s=!1);var a=e.preserveState;return void 0===a&&(a=!1),this.page=t,o.increment(),Promise.resolve(this.resolveComponent(t.component)).then(function(e){n===i.visitId&&(i.version=t.version,i.setState(t,r,a),i.updatePage(e,t.props,{preserveState:a}),i.setScroll(s),o.stop())})},setScroll:function(t){t||window.scrollTo(0,0)},setState:function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),e||t.url===""+window.location.pathname+window.location.search?window.history.replaceState(Object.assign({},i&&window.history.state?{cache:window.history.state.cache}:{},t),"",t.url):window.history.pushState(t,"",t.url)},restoreState:function(t){t.state&&this.setPage(t.state)},replace:function(t,e){return void 0===e&&(e={}),this.visit(t,Object.assign({},{preserveState:!0},e,{replace:!0}))},reload:function(t){return void 0===t&&(t={}),this.replace(window.location.href,t)},post:function(t,e,i){return void 0===e&&(e={}),void 0===i&&(i={}),this.visit(t,Object.assign({},{preserveState:!0},i,{method:"post",data:e}))},put:function(t,e,i){return void 0===e&&(e={}),void 0===i&&(i={}),this.visit(t,Object.assign({},{preserveState:!0},i,{method:"put",data:e}))},patch:function(t,e,i){return void 0===e&&(e={}),void 0===i&&(i={}),this.visit(t,Object.assign({},{preserveState:!0},i,{method:"patch",data:e}))},delete:function(t,e){return void 0===e&&(e={}),this.visit(t,Object.assign({},e,{method:"delete"}))},remember:function(t,e){void 0===e&&(e="default");var i=Object.assign({},window.history.state);i.cache=i.cache||{},i.cache[e]=t,this.setState(i)},restore:function(t){if(void 0===t&&(t="default"),window.history.state.cache&&window.history.state.cache[t])return window.history.state.cache[t]}},t.shouldIntercept=function(t){return!(t.target&&t.target.isContentEditable||t.defaultPrevented||t.which>1||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)}});
//# sourceMappingURL=index.umd.js.map
